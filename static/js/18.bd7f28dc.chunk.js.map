{"version":3,"sources":["../node_modules/@material-ui/core/esm/CardActions/CardActions.js","views/Rebates/components/DepositModal.tsx","views/Rebates/CemeteryCard.js","views/Rebates/Cemetery.js","hooks/useRebateTreasury.js","hooks/useCashPriceInEstimatedTWAP.ts"],"names":["CardActions","React","props","ref","_props$disableSpacing","disableSpacing","classes","className","other","_objectWithoutProperties","_extends","clsx","root","spacing","withStyles","display","alignItems","padding","marginLeft","name","StyledMaxText","styled","div","theme","color","grey","DepositModal","max","onConfirm","onDismiss","tokenName","token","useState","val","setVal","tombFinance","useTombFinance","rebateStats","useRebateTreasury","useETHPrice","ftmPrice","price","fullBalance","priceChange","useMemo","getFullDisplayBalance","handleChange","useCallback","e","currentTarget","value","handleSelectMax","tombAvailable","toString","getAssetPrice","address","externalTokens","assets","find","a","getOutAmount","toBondPrice","tombPrice","bondPremium","params","multiplier","Modal","ModalTitle","text","TokenInput","onSelectMax","onChange","symbol","style","marginTop","toFixed","outAmount","formatOutAmount","ModalActions","Button","variant","disabled","onClick","web3","Web3","BN","n","utils","CemeteryCard","bank","useApprove","depositTokenName","approveStatus","approve","tokenBalance","useTokenBalance","useModal","console","log","Math","floor","mul","pow","window","ethereum","request","method","account","from","to","RebateTreasury","_address","data","methods","bond","encodeABI","onPresentDeposit","Grid","item","xs","md","lg","Card","border","CardContent","Box","position","right","top","height","width","borderRadius","backgroundColor","justifyContent","TokenSymbol","size","Typography","component","toUpperCase","ApprovalState","APPROVED","NOT_APPROVED","BackgroundImage","createGlobalStyle","useStyles","makeStyles","gridItem","breakpoints","up","Cemetery","useBanks","banks","path","useRouteMatch","useWallet","cashStat","useCashPriceInEstimatedTWAP","activeBanks","Number","priceInDollars","filter","finished","claimable3omb","setClaimable3omb","vested","setVested","updateVesting","claimableTomb","call","claimable","vesting","fromWei","amount","sub","claimed","claimRewards","useEffect","interval","setInterval","clearInterval","Page","exact","align","gutterBottom","marginBottom","mt","container","justify","hidden","sectionInUI","length","map","Fragment","key","UnlockWallet","eth","Contract","Threeomb","assetList","setTombPrice","setTombAvailable","setBondPremium","bondVesting","setBondVesting","asset","isLP","setAssets","update","Promise","all","getTombPrice","balanceOf","totalVested","getBondPremium","getTokenPrice","tombBalance","vestedTomb","assetParams","assetPrices","push","stat","setStat","slowRefresh","useRefresh","getTombStatInEstimatedTWAP","error","fetchCashPrice"],"mappings":"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","file":"static/js/18.bd7f28dc.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: 8\n  },\n\n  /* Styles applied to the root element if `disableSpacing={false}`. */\n  spacing: {\n    '& > :not(:first-child)': {\n      marginLeft: 8\n    }\n  }\n};\nvar CardActions = /*#__PURE__*/React.forwardRef(function CardActions(props, ref) {\n  var _props$disableSpacing = props.disableSpacing,\n      disableSpacing = _props$disableSpacing === void 0 ? false : _props$disableSpacing,\n      classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"disableSpacing\", \"classes\", \"className\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, !disableSpacing && classes.spacing),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? CardActions.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the actions do not have additional margin.\n   */\n  disableSpacing: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCardActions'\n})(CardActions);","import React, { useCallback, useMemo, useState, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport { Button } from '@material-ui/core';\n// import Button from '../../../components/Button'\nimport Modal, { ModalProps } from '../../../components/Modal';\nimport ModalActions from '../../../components/ModalActions';\nimport ModalTitle from '../../../components/ModalTitle';\nimport TokenInput from '../../../components/TokenInput';\nimport useRebateTreasury from \"../../../hooks/useRebateTreasury\"\nimport useTombFinance from '../../../hooks/useTombFinance';\nimport useETHPrice from '../../../hooks/useETHPrice';\n\n\nimport { getFullDisplayBalance } from '../../../utils/formatBalance';\nimport { BigNumber } from 'ethers';\n\ninterface DepositModalProps extends ModalProps {\n  max: BigNumber;\n  onConfirm: (amount: Number) => void;\n  tokenName?: string;\n  token?: any;\n}\n\nconst DepositModal: React.FC<DepositModalProps> = ({ max, onConfirm, onDismiss, tokenName = '', token }) => {\n  const [val, setVal] = useState('');\n  const [out, setOut] = useState(0);\n\n  const tombFinance = useTombFinance();\n  const rebateStats = useRebateTreasury();\n  const { price: ftmPrice, priceChange: ftmPriceChange } = useETHPrice();\n\n  const fullBalance = useMemo(() => {\n    return getFullDisplayBalance(max, tokenName === 'USDC' ? 6 : 18);\n  }, [max, tokenName]);\n\n  const handleChange = useCallback(\n    (e: React.FormEvent<HTMLInputElement>) => {\n      setVal(e.currentTarget.value);\n    },\n    [setVal],\n  );\n\n  const handleSelectMax = useCallback(() => {\n    setVal((rebateStats.tombAvailable > +fullBalance ? fullBalance : rebateStats.tombAvailable.toString()));\n  }, [fullBalance, setVal, rebateStats]);\n\n  function getAssetPrice(token: String) {\n    const address = tombFinance.externalTokens[tokenName].address\n    const assetPrice = rebateStats.assets.find((a: any) => a.token === address).price\n    return assetPrice\n  }\n\n  function getOutAmount() {\n    const toBondPrice = getAssetPrice(tokenName)\n    const outAmount = +val * (toBondPrice / rebateStats.tombPrice * (1 + (rebateStats.bondPremium / 100)) * (token.params.multiplier / 1000000))\n    return outAmount\n  }\n\n  function formatOutAmount() {\n    const outAmount = getOutAmount()\n    return `Receiving: ${outAmount.toFixed(4)} 3OMB ($${(outAmount * rebateStats.tombPrice * ftmPrice).toFixed(2)})`\n  }\n\n  function formatInAmount() {\n    return `Input: ${(+val).toFixed(4)} ${tokenName} ($${((+val) * getAssetPrice(tokenName) * ftmPrice).toFixed(2)})`\n  }\n\n  return (\n    <Modal>\n      <ModalTitle text={`Bond ${tokenName}`} />\n      <TokenInput\n        value={val}\n        onSelectMax={handleSelectMax}\n        onChange={handleChange}\n        max={fullBalance}\n        symbol={tokenName}\n      />\n      <StyledMaxText style={{marginTop: \"14px\"}}>\n        { formatInAmount() }\n      </StyledMaxText>\n      <StyledMaxText>\n        { formatOutAmount() }\n      </StyledMaxText>\n      <StyledMaxText style = {{color: getOutAmount() < rebateStats.tombAvailable ? \"black\" : \"var(--accent)\"}}>\n        {rebateStats.tombAvailable > 0 ? `${rebateStats.tombAvailable.toFixed(4)} 3OMB Available` : \"Bond Sold Out\"}\n      </StyledMaxText>\n      <ModalActions>\n        <Button color={ (getOutAmount() < rebateStats.tombAvailable ? \"primary\" : \"secondary\") } variant=\"contained\" disabled = { getOutAmount() >= rebateStats.tombAvailable } onClick={() => onConfirm(+val)}>\n          Confirm\n        </Button>\n      </ModalActions>\n    </Modal>\n  );\n};\n\nconst StyledMaxText = styled.div`\n  align-items: center;\n  color: ${(props) => props.theme.color.grey[600]};\n  display: flex;\n  font-size: 18px;\n  margin-top: 2px;\n  font-weight: 700;\n  justify-content: flex-start;\n`;\n\n\nexport default DepositModal;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Box, Button, Card, CardActions, CardContent, Typography, Grid } from '@material-ui/core';\nimport useRebateTreasury from \"../../hooks/useRebateTreasury\"\nimport useApprove, { ApprovalState } from '../../hooks/useApprove';\nimport useModal from '../../hooks/useModal';\nimport useTokenBalance from '../../hooks/useTokenBalance';\nimport DepositModal from './components/DepositModal';\nimport useTombFinance from '../../hooks/useTombFinance';\nimport TokenSymbol from '../../components/TokenSymbol';\nimport Web3 from \"web3\"\n\nconst web3 = new Web3()\nconst BN = n => new web3.utils.BN(n)\n\nconst CemeteryCard = ({ bank }) => {\n  const tombFinance = useTombFinance();\n\n  const rebateStats = useRebateTreasury()\n\n  const [approveStatus, approve] = useApprove(tombFinance.externalTokens[bank.depositTokenName], \"0x8f555E00ea0FAc871b3Aa70C015915dB094E7f88\");\n\n  const tokenBalance = useTokenBalance(tombFinance.externalTokens[bank.depositTokenName]);\n\n  const [onPresentDeposit, onDismissDeposit] = useModal(\n    <DepositModal\n      max={tokenBalance}\n      onConfirm={async (value) => {\n        console.log(\"running my on confirm\")\n        console.log(\"doing the bond\")\n        console.log(BN(Math.floor(value * 10000)).mul(BN(10).pow(BN(14))).toString())\n        if (!window.ethereum) return\n        const account = (await window.ethereum.request({ method: \"eth_accounts\" }))[0]\n        if (!account) return\n         window.ethereum.request({\n           method: \"eth_sendTransaction\",\n           params: [{\n              from: account,\n              to: rebateStats.RebateTreasury._address,\n              data: rebateStats.RebateTreasury.methods.bond(tombFinance.externalTokens[bank.depositTokenName].address, BN(Math.floor(value * 10000)).mul(BN(10).pow(BN(14)))).encodeABI()\n          }]\n        })\n        \n      }}\n      tokenName={bank.depositTokenName}\n      token={rebateStats.assets.find( token => token.token === tombFinance.externalTokens[bank.depositTokenName].address)}\n    />,\n  );\n\n  return (\n    <Grid item xs={12} md={4} lg={4}>\n      <Card variant=\"outlined\" style={{ border: '1px solid var(--white)' }}>\n        <CardContent>\n          <Box style={{ position: 'relative' }}>\n            <Box\n              style={{\n                position: 'absolute',\n                right: '0px',\n                top: '-5px',\n                height: '48px',\n                width: '48px',\n                borderRadius: '40px',\n                backgroundColor: 'transparent',\n                alignItems: 'center',\n                display: 'flex',\n                justifyContent: 'center',\n              }}\n            >\n              <TokenSymbol size={32} symbol={bank.depositTokenName} />\n            </Box>\n            <Typography variant=\"h5\" component=\"h2\">\n              {bank.depositTokenName}\n            </Typography>\n            <Typography color=\"textSecondary\">\n              {/* {bank.name} */}\n              Bond {bank.depositTokenName.toUpperCase()} Earn 3OMB\n            </Typography>\n            <Typography color=\"textSecondary\">\n              Multiplier: {bank.multiplier}\n            </Typography>\n          </Box>\n        </CardContent>\n        <CardActions style={{ justifyContent: 'flex-end' }}>\n          {approveStatus !== ApprovalState.APPROVED ? (\n              <Button\n              disabled={approveStatus !== ApprovalState.NOT_APPROVED}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={approve}\n              >\n              Approve {bank.depositTokenName}\n              </Button>\n          ) : (\n            <Button color=\"primary\" size=\"small\" variant=\"contained\" onClick={onPresentDeposit}>\n              Bond\n            </Button>\n          )}\n\n        </CardActions>\n      </Card>\n    </Grid>\n  );\n};\n\nexport default CemeteryCard;\n","import React, { useMemo, useState, useEffect } from 'react';\nimport { useWallet } from 'use-wallet';\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\nimport Bank from '../Bank';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Web3 from \"web3\"\n\nimport { Box, Card, CardContent, Button, Typography, Grid } from '@material-ui/core';\n\nimport { Alert } from '@material-ui/lab';\n\nimport UnlockWallet from '../../components/UnlockWallet';\nimport Page from '../../components/Page';\nimport CemeteryCard from './CemeteryCard';\nimport { createGlobalStyle } from 'styled-components';\nimport useCashPriceInEstimatedTWAP from '../../hooks/useCashPriceInEstimatedTWAP';\n\nimport useBanks from '../../hooks/useBanks';\nimport useRebateTreasury from \"../../hooks/useRebateTreasury\"\n\nconst web3 = new Web3()\nconst BN = n => new web3.utils.BN(n)\n\nconst BackgroundImage = createGlobalStyle`\n  body {\n    background-color: var(--black);\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='32' viewBox='0 0 16 32'%3E%3Cg fill='%231D1E1F' fill-opacity='0.4'%3E%3Cpath fill-rule='evenodd' d='M0 24h4v2H0v-2zm0 4h6v2H0v-2zm0-8h2v2H0v-2zM0 0h4v2H0V0zm0 4h2v2H0V4zm16 20h-6v2h6v-2zm0 4H8v2h8v-2zm0-8h-4v2h4v-2zm0-20h-6v2h6V0zm0 4h-4v2h4V4zm-2 12h2v2h-2v-2zm0-8h2v2h-2V8zM2 8h10v2H2V8zm0 8h10v2H2v-2zm-2-4h14v2H0v-2zm4-8h6v2H4V4zm0 16h6v2H4v-2zM6 0h2v2H6V0zm0 24h2v2H6v-2z'/%3E%3C/g%3E%3C/svg%3E\");\n}\n\n* {\n    border-radius: 0 !important;\n    box-shadow: none !important;\n}\n`;\n\nconst useStyles = makeStyles((theme) => ({\n  gridItem: {\n    height: '100%',\n    [theme.breakpoints.up('md')]: {\n      height: '90px',\n    },\n  },\n}));\n\nconst Cemetery = () => {\n  const classes = useStyles();\n  const [banks] = useBanks();\n  const { path } = useRouteMatch();\n  const { account } = useWallet();\n  const cashStat = useCashPriceInEstimatedTWAP();\n  const scalingFactor = useMemo(() => (cashStat ? Number(cashStat.priceInDollars).toFixed(4) : null), [cashStat]);\n  const activeBanks = banks.filter((bank) => !bank.finished);\n\n  console.log(cashStat)\n\n  const rebateStats = useRebateTreasury()\n  console.log(rebateStats)\n  const [claimable3omb, setClaimable3omb] = useState(0);\n  const [ vested, setVested ] = useState(0)\n\n  useEffect(() => {\n    updateVesting()\n    const interval = setInterval(updateVesting, 5000) \n    return () => clearInterval(interval)\n  }, [])\n\n  async function updateVesting() {\n    if (!window.ethereum) return\n    const address = (await window.ethereum.request({ method: \"eth_accounts\" }))[0]\n    if (!address) return\n\n    const claimable = await rebateStats.RebateTreasury.methods.claimableTomb(address).call()\n    const vesting = await rebateStats.RebateTreasury.methods.vesting(address).call()\n    setClaimable3omb(+web3.utils.fromWei(claimable))\n    setVested(+web3.utils.fromWei(BN(vesting.amount).sub(BN(vesting.claimed))))\n}\n\n  async function claimTomb() {\n    console.log(\"claiming the tomb\")\n    if (!window.ethereum) return\n    const address = (await window.ethereum.request({ method: \"eth_accounts\" }))[0]\n    if (!address) return\n    window.ethereum.request({\n      method: \"eth_sendTransaction\",\n      params: [{\n        from: address,\n        to: rebateStats.RebateTreasury._address,\n        data: rebateStats.RebateTreasury.methods.claimRewards().encodeABI()\n      }]\n    })\n  }\n\n  return (\n    <Switch>\n      <Page>\n        <Route exact path={path}>\n          <BackgroundImage />\n          {!!account ? (\n            <>\n              <Typography color=\"textPrimary\" align=\"center\" variant=\"h3\" gutterBottom style={{ marginBottom: '40px' }}>\n                Treasury Bonding\n              </Typography>\n              <Box mt={2}>\n                <Grid container justify=\"center\" spacing={3}>\n                  <Grid item xs={12} md={3} lg={3} className={classes.gridItem}>\n                    <Card className={classes.gridItem}>\n                      <CardContent align=\"center\">\n                        <Typography variant=\"h5\">\n                          BETH Price <small>(TWAP)</small>\n                        </Typography>\n                        <Typography variant=\"h6\">{rebateStats.tombPrice.toFixed(3)} ETH</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={12} md={3} lg={3} className={classes.gridItem}>\n                    <Card className={classes.gridItem}>\n                      <CardContent align=\"center\">\n                        <Typography variant=\"h5\">\n                          Bond Premium\n                        </Typography>\n                        <Typography variant=\"h6\">{rebateStats.bondPremium.toFixed(3)}%</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                </Grid>\n              </Box>\n              <div hidden={activeBanks.filter((bank) => bank.sectionInUI === 0).length === 0}>\n                  <Typography color=\"textPrimary\" variant=\"h4\" gutterBottom style={{ marginTop: '35px', marginBottom: '30px' }}>\n                    Bondable Assets\n                  </Typography>\n                  <Grid container spacing={3}>\n                    {activeBanks\n                      .filter((bank) => bank.sectionInUI === 3)\n                      .map((bank) => (\n                        <React.Fragment key={bank.name}>\n                          <CemeteryCard bank={bank} />\n                        </React.Fragment>\n                      ))}\n                  </Grid>\n              </div>\n              <Box mt={2}>\n                <Grid container justify=\"center\" spacing={3}>\n                  <Grid item xs={12} md={3} lg={3} className={classes.gridItem}>\n                    <Card style={{ height: \"auto\" }}>\n                      <CardContent align=\"center\">\n                        <Typography variant=\"h5\">\n                          BETH Vesting\n                        </Typography>\n                        <Typography variant=\"h6\">{vested.toFixed(4)} Vested</Typography>\n                        <Typography variant=\"h6\">{claimable3omb.toFixed(4)} Pending</Typography>\n                        <Button color=\"primary\" size=\"small\" variant=\"contained\" onClick={claimTomb} style={{ marginTop: \"8px\" }}>\n                          CLAIM\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                </Grid>\n              </Box>\n            </>\n          ) : (\n            <UnlockWallet />\n          )}\n        </Route>\n      </Page>\n    </Switch>\n  );\n};\n\nexport default Cemetery;\n","import { useEffect, useState } from \"react\"\nimport Web3 from \"web3\"\n\nconst RebateTreasuryABI = [{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"DENOMINATOR\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"Tomb\",\"outputs\":[{\"internalType\":\"contract IERC20\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"TombOracle\",\"outputs\":[{\"internalType\":\"contract IOracle\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"Treasury\",\"outputs\":[{\"internalType\":\"contract ITreasury\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"WFTM\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"assets\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"isAdded\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"multiplier\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"oracle\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isLP\",\"type\":\"bool\"},{\"internalType\":\"address\",\"name\":\"pair\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"bond\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"bondFactor\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"bondThreshold\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"bondVesting\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"buybackAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"call\",\"outputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"claimRewards\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"claimableTomb\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getBondPremium\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"getTokenPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getTombPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"getTombReturn\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lastBuyback\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"tokens\",\"type\":\"address[]\"}],\"name\":\"redeemAssetsForBuyback\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"secondaryFactor\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"secondaryThreshold\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isAdded\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"multiplier\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"oracle\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isLP\",\"type\":\"bool\"},{\"internalType\":\"address\",\"name\":\"pair\",\"type\":\"address\"}],\"name\":\"setAsset\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"primaryThreshold\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"primaryFactor\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"secondThreshold\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"secondFactor\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"vestingPeriod\",\"type\":\"uint256\"}],\"name\":\"setBondParameters\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"tomb\",\"type\":\"address\"}],\"name\":\"setTomb\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"oracle\",\"type\":\"address\"}],\"name\":\"setTombOracle\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"treasury\",\"type\":\"address\"}],\"name\":\"setTreasury\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"totalVested\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"vesting\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"period\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"end\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"claimed\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastClaimed\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]\nconst ERC20ABI = [{ \"constant\": true, \"inputs\": [], \"name\": \"name\", \"outputs\": [ { \"name\": \"\", \"type\": \"string\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_spender\", \"type\": \"address\" }, { \"name\": \"_value\", \"type\": \"uint256\" } ], \"name\": \"approve\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"totalSupply\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_from\", \"type\": \"address\" }, { \"name\": \"_to\", \"type\": \"address\" }, { \"name\": \"_value\", \"type\": \"uint256\" } ], \"name\": \"transferFrom\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"decimals\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint8\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_owner\", \"type\": \"address\" } ], \"name\": \"balanceOf\", \"outputs\": [ { \"name\": \"balance\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"symbol\", \"outputs\": [ { \"name\": \"\", \"type\": \"string\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_to\", \"type\": \"address\" }, { \"name\": \"_value\", \"type\": \"uint256\" } ], \"name\": \"transfer\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"_owner\", \"type\": \"address\" }, { \"name\": \"_spender\", \"type\": \"address\" } ], \"name\": \"allowance\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"fallback\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"owner\", \"type\": \"address\" }, { \"indexed\": true, \"name\": \"spender\", \"type\": \"address\" }, { \"indexed\": false, \"name\": \"value\", \"type\": \"uint256\" } ], \"name\": \"Approval\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"from\", \"type\": \"address\" }, { \"indexed\": true, \"name\": \"to\", \"type\": \"address\" }, { \"indexed\": false, \"name\": \"value\", \"type\": \"uint256\" } ], \"name\": \"Transfer\", \"type\": \"event\" } ]\n\nconst web3 = new Web3(\"https://rpc.ftm.tools\")\nconst RebateTreasury = new web3.eth.Contract(RebateTreasuryABI, \"0x8f555E00ea0FAc871b3Aa70C015915dB094E7f88\")\nconst Threeomb = new web3.eth.Contract(ERC20ABI, \"0x14DEf7584A6c52f470Ca4F4b9671056b22f4FfDE\")\n\nconst assetList = [\n    \"0xc54A1684fD1bef1f077a336E6be4Bd9a3096a6Ca\", // 2shares\n    \"0x6398ACBBAB2561553a9e458Ab67dCFbD58944e52\", // 2shares/FTM LP\n    \"0x83A52eff2E9D112E9B022399A9fD22a9DB7d33Ae\", // 3omb/wftm\n    \"0x6437ADAC543583C4b31Bf0323A0870430F5CC2e7\", //3shares\n    \"0xd352daC95a91AfeFb112DBBB3463ccfA5EC15b65\", //3shares/wftm\n]\n\nfunction useRebateTreasury() {\n\n    const [ tombPrice, setTombPrice ] = useState(0)\n    const [ tombAvailable, setTombAvailable ] = useState(0)\n    const [ bondPremium, setBondPremium ] = useState(0)\n    const [ bondVesting, setBondVesting ] = useState(0)\n    const [ assets, setAssets ] = useState(assetList.map(asset => ({\n        token: asset,\n        params: {\n            multiplier: 0,\n            isLP: false\n        },\n        price: 0\n    })))\n\n    async function update() {\n        const [\n            tombPrice,\n            tombBalance,\n            vestedTomb,\n            bondPremium,\n            bondVesting,\n            assetParams,\n            assetPrices\n        ] = await Promise.all([\n            RebateTreasury.methods.getTombPrice().call(),\n            Threeomb.methods.balanceOf(RebateTreasury._address).call(),\n            RebateTreasury.methods.totalVested().call(),\n            RebateTreasury.methods.getBondPremium().call(),\n            RebateTreasury.methods.bondVesting().call(),\n            Promise.all(assetList.map(asset => RebateTreasury.methods.assets(asset).call())),\n            Promise.all(assetList.map(asset => RebateTreasury.methods.getTokenPrice(asset).call()))\n        ])\n\n        setTombPrice(+web3.utils.fromWei(tombPrice))\n        setTombAvailable(+web3.utils.fromWei(tombBalance) - +web3.utils.fromWei(vestedTomb))\n        setBondPremium(+bondPremium / 10000)\n        setBondVesting(+bondVesting / 10000)\n\n        const assets = []\n        for (let a = 0; a < assetList.length; a ++) {\n            assets.push({\n                token: assetList[a],\n                params: {\n                    multiplier: assetParams[a].multiplier,\n                    isLP: assetParams[a].isLP\n                },\n                price: +web3.utils.fromWei(assetPrices[a])\n            })\n        }\n        setAssets(assets)\n    }\n\n    useEffect(() => {\n        update()\n        const interval = setInterval(update, 10000)\n        return () => clearInterval(interval)\n    }, [])\n\n    return {\n        RebateTreasury,\n        tombPrice,\n        bondPremium,\n        bondVesting,\n        tombAvailable,\n        assets\n    }\n}\n\nexport default useRebateTreasury","import { useEffect, useState } from 'react';\nimport useTombFinance from './useTombFinance';\nimport { TokenStat } from '../tomb-finance/types';\nimport useRefresh from './useRefresh';\n\nconst useCashPriceInEstimatedTWAP = () => {\n  const [stat, setStat] = useState<TokenStat>();\n  const tombFinance = useTombFinance();\n  const { slowRefresh } = useRefresh(); \n\n  useEffect(() => {\n    async function fetchCashPrice() {\n      try {\n        setStat(await tombFinance.getTombStatInEstimatedTWAP());\n      }catch(err) {\n        console.error(err);\n      }\n    }\n    fetchCashPrice();\n  }, [setStat, tombFinance, slowRefresh]);\n\n  return stat;\n};\n\nexport default useCashPriceInEstimatedTWAP;\n"],"sourceRoot":""}